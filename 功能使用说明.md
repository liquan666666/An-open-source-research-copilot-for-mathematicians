# 数学研究助手 - 功能使用说明

## 📌 快速导航

- ✅ **完整功能**：可直接使用的真实功能
- 📋 **演示功能**：仅供展示，数据为模拟
- ⚠️ **本地功能**：功能可用但数据仅保存在浏览器

---

## ✅ 完整功能（真实可用）

### 1. 论文搜索

**访问地址**：http://localhost:3000/papers

**功能说明**：
- 连接真实 arXiv 和 Crossref API
- 可搜索数百万篇真实学术论文
- 支持三种数据源选择：
  - 📚 全部来源
  - 📄 arXiv（预印本论文）
  - 🎓 SCI 期刊（已发表论文）

**如何使用**：
```
1. 确保后端 API 已启动（docker-compose up）
2. 访问论文库页面
3. 选择数据源
4. 输入搜索关键词（如："deep learning"、"topology"）
5. 点击搜索按钮
6. 查看真实搜索结果
```

**搜索结果包含**：
- 论文标题、作者、发表年份
- 完整摘要
- DOI 和下载链接
- 引用次数（SCI 论文）
- 直接跳转到 arXiv 或期刊网站

**注意事项**：
- ⚠️ 外部 API 可能有速率限制
- ⚠️ 需要网络连接
- ⚠️ Crossref API 响应可能较慢（10秒超时）

---

### 2. Stripe 支付系统

**访问地址**：http://localhost:3000/pricing

**功能说明**：
- 真实的 Stripe 支付集成
- 安全的在线支付流程
- 支持多种支付方式

**订阅计划**：
- 💰 月度订阅：¥29/月
- 💎 年度订阅：¥299/年（相当于 ¥24.9/月）
- 🏆 终身会员：¥999（一次性付款）

**支持的支付方式**：
- 信用卡（Visa、MasterCard、American Express）
- 支付宝
- 微信支付

**如何使用**：
```
1. 访问定价页面
2. 选择订阅计划
3. 点击"立即订阅"按钮
4. 重定向到 Stripe Checkout 页面
5. 填写支付信息
6. 完成支付
7. 自动跳转到成功页面
```

**测试模式**（开发环境）：
使用以下测试卡号进行测试：
- 卡号：`4242 4242 4242 4242`
- 到期日期：任意未来日期（如 12/28）
- CVC：任意 3 位数字（如 123）
- 邮编：任意邮编（如 10000）

**配置要求**：
需要设置以下环境变量：
```bash
# 后端（.env）
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_PRICE_MONTHLY=price_xxx
STRIPE_PRICE_YEARLY=price_xxx
STRIPE_PRICE_LIFETIME=price_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# 前端（apps/web/.env.local）
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx
```

详细配置步骤请参考 `SETUP_GUIDE.md`

---

## ⚠️ 本地功能（数据仅保存在浏览器）

### 3. 账户管理

**访问地址**：http://localhost:3000/account

**功能说明**：
- 查看订阅信息
- 管理订阅计划
- 查看使用历史

**数据存储**：
- ⚠️ 使用浏览器 localStorage 存储
- ⚠️ 清除浏览器缓存会丢失数据
- ⚠️ 无法跨设备/浏览器同步

**可用功能**：
- ✅ 查看当前订阅状态
- ✅ 取消订阅
- ✅ 升级计划
- ✅ 查看订阅历史
- ❌ 跨设备同步（需要数据库支持）

---

### 4. 数据导出

**访问地址**：http://localhost:3000/export

**功能说明**：
- 导出本地保存的数据
- 支持 JSON 和 CSV 格式

**可导出内容**：
- 研究兴趣列表
- 订阅信息
- 使用统计数据

**导出格式**：
- **JSON**：完整的结构化数据
- **CSV**：研究兴趣表格
- **PDF**：❌ 暂不支持（需要后端实现）

**如何使用**：
```
1. 访问数据导出页面
2. 选择导出格式（JSON 或 CSV）
3. 点击对应的"导出"按钮
4. 浏览器自动下载文件
```

**注意**：
- ⚠️ 导出的是本地 localStorage 中的数据
- ⚠️ 如果没有使用过其他功能，导出数据可能为空

---

### 5. 使用统计

**访问地址**：http://localhost:3000/stats

**功能说明**：
- 追踪用户行为
- 生成使用报告

**数据来源**：
- ⚠️ 部分数据是硬编码（演示用）
- ⚠️ 行为追踪存储在 localStorage
- ⚠️ 统计卡片显示的是模拟数据

**显示内容**：
```
统计卡片（硬编码）：
- 使用天数：15 天
- 打卡次数：12 次
- 完成任务：45 个
- 阅读论文：23 篇
- 研究兴趣：5 项
- 生成路线：3 次
- 平均完成率：78%

趋势图（硬编码）：
- 4 周的模拟数据

成就徽章（硬编码）：
- 4 个徽章（2 个已解锁）
```

**注意**：
- ⚠️ 大部分数据是演示用的硬编码值
- ⚠️ 不反映真实使用情况
- ✅ 行为追踪功能可用（基于 localStorage）

---

## 📋 演示功能（仅供展示）

以下功能仅用于演示 UI/UX，数据为硬编码或临时存储，**不具备实际功能**。

### 6. 论文助手

**访问地址**：http://localhost:3000/paper-assistant

**当前状态**：📋 演示版

**功能限制**：
- ❌ 只能选择 3 篇预设论文：
  - "Attention Is All You Need"
  - "Graph Neural Networks: A Review"
  - "Deep Residual Learning"
- ❌ 分析结果是硬编码的
- ❌ 不支持自定义论文分析
- ❌ 没有真实 AI 分析

**显示内容**：
- 关键贡献（固定 4 条）
- 方法论（固定 4 条）
- 主要结果（固定 3 条）
- 局限性（固定 3 条）
- 知识点（固定列表）

**模拟分析过程**：
- 点击"开始智能分析"显示加载动画（2秒）
- 然后显示预设的分析结果

---

### 7. 课题推荐

**访问地址**：http://localhost:3000/topics

**当前状态**：📋 演示版

**功能限制**：
- ❌ 固定显示 3 个课题：
  1. 拓扑空间中的不动点定理及其应用
  2. 图神经网络在组合优化中的理论基础
  3. 高维概率分布的采样方法
- ❌ 不基于用户兴趣生成
- ❌ 没有个性化推荐
- ❌ 课题信息是硬编码的

**显示内容**：
- 课题名称
- 难度等级（中等）
- 预计时间（3-4个月）
- 相关论文数量
- 研究方向、预备知识、核心问题

**点击"选择此课题"**：
- 跳转到学习路线图页面
- ⚠️ 但路线图也是固定内容，与课题选择无关

---

### 8. 学习路线图

**访问地址**：http://localhost:3000/roadmap

**当前状态**：📋 演示版

**功能限制**：
- ❌ 固定显示一个 3 个月的学习计划
- ❌ 分为 5 个阶段（每阶段 2-4 周）
- ❌ 所有内容是硬编码的
- ❌ 不根据课题或用户水平调整

**路线图结构**：
```
阶段 1（1-2周）：基础知识补充
- 泛函分析基础
- 拓扑学导论

阶段 2（3-4周）：文献调研
- 论文精读
- 最新进展跟踪

阶段 3（5-6周）：问题定位
- 细化研究问题
- 技术方法学习

阶段 4（7-8周）：初步探索
- 理论推导
- 数值实验验证

阶段 5（9-12周）：深入研究
- 核心定理证明
- 撰写论文
```

**显示内容**：
- 每个阶段包含多个学习项目
- 学习项目有预计时间和资源链接
- ⚠️ 资源链接都是示例 URL

---

### 9. 任务管理

**访问地址**：http://localhost:3000/tasks

**当前状态**：📋 演示版

**功能限制**：
- ❌ 显示 5 个预设任务
- ✅ 可点击标记完成/未完成
- ❌ "添加新任务"按钮无功能
- ❌ 数据存储在 React state（页面刷新后丢失）
- ❌ 无法真正创建、编辑、删除任务

**预设任务列表**：
```
1. 阅读泛函分析第3章 - 高优先级
2. 整理昨天的证明思路 - 高优先级
3. 数值实验：验证猜想 - 中优先级（已完成）
4. 查阅相关文献 - 中优先级
5. 每周组会准备 - 低优先级
```

**可用功能**：
- ✅ 点击任务标记为完成/未完成
- ✅ 按优先级筛选
- ❌ 添加新任务（按钮无功能）
- ❌ 编辑任务
- ❌ 删除任务
- ❌ 数据持久化

**刷新页面后**：
- ⚠️ 所有更改丢失
- ⚠️ 恢复到初始的 5 个任务

---

### 10. 打卡系统

**访问地址**：http://localhost:3000/checkin

**当前状态**：📋 演示版

**功能限制**：
- ❌ 表单可以填写但不会保存
- ❌ "提交今日打卡"按钮无实际功能
- ❌ 打卡历史是硬编码的 3 条记录
- ❌ 统计数据是硬编码的

**表单内容**：
```
1. 选择心情（4 个表情）
2. 今日完成内容（文本框）
3. 遇到的困难与障碍（文本框）
4. 提交按钮（⚠️ 无功能）
```

**打卡历史（硬编码）**：
```
2026-01-13：完成 4/5 任务，心情 😊
2026-01-12：完成 3/5 任务，心情 😐
2026-01-11：完成 2/4 任务，心情 😤
```

**打卡统计（硬编码）**：
- 连续打卡天数：3 天
- 总打卡天数：3 天
- 平均完成率：75%

**点击"提交今日打卡"**：
- ⚠️ 没有任何反应
- ⚠️ 数据不会保存
- ⚠️ 历史记录不会更新

---

## 🎯 使用建议

### 适合的使用场景

#### 1. 真实论文研究
✅ **推荐使用**：论文搜索功能
- 搜索 arXiv 预印本
- 查找 SCI 期刊论文
- 获取论文 PDF 和引用信息

#### 2. 订阅和付费
✅ **推荐使用**：Stripe 支付（测试模式）
- 测试支付流程
- 演示订阅功能
- ⚠️ 生产环境需切换到正式 Stripe 密钥

#### 3. UI/UX 展示
✅ **适合演示**：所有页面
- 展示应用界面设计
- 演示用户交互流程
- 展示功能规划

#### 4. 开发参考
✅ **适合学习**：代码结构
- Next.js 应用架构
- React 组件设计
- TypeScript 类型定义
- Tailwind CSS 样式
- Framer Motion 动画

### 不适合的使用场景

#### ❌ 真实数据管理
- 任务管理（数据会丢失）
- 打卡记录（无法保存）
- 课题计划（固定内容）

#### ❌ 跨设备使用
- 所有本地数据无法同步
- 换浏览器需重新设置

#### ❌ 生产环境部署
- 大部分功能需要后端实现
- 需要数据库支持
- 需要用户认证系统

---

## 🚀 开发路线图

### 需要实现的功能

#### 第一优先级：数据持久化
- [ ] 实现用户认证系统
- [ ] 搭建数据库（PostgreSQL/MongoDB）
- [ ] 实现任务管理后端 API
- [ ] 实现打卡系统后端 API
- [ ] 实现用户资料后端存储

#### 第二优先级：智能推荐
- [ ] 集成 AI 模型（如 OpenAI API）
- [ ] 实现真实论文分析功能
- [ ] 基于用户行为的课题推荐
- [ ] 个性化学习路线生成

#### 第三优先级：高级功能
- [ ] PDF 报告生成
- [ ] 邮件通知系统
- [ ] 团队协作功能
- [ ] 移动端适配

---

## ⚙️ 环境配置检查清单

### 论文搜索功能

- [ ] 后端 API 已启动（`docker-compose up` 或 `uvicorn server.main:app --port 8000`）
- [ ] 前端环境变量已设置：`NEXT_PUBLIC_API_BASE=http://localhost:8000`
- [ ] 网络连接正常
- [ ] 可以访问 arXiv 和 Crossref API

### Stripe 支付功能

**后端环境变量（apps/api/.env）**：
- [ ] `STRIPE_SECRET_KEY` - Stripe 密钥
- [ ] `STRIPE_PRICE_MONTHLY` - 月度订阅价格 ID
- [ ] `STRIPE_PRICE_YEARLY` - 年度订阅价格 ID
- [ ] `STRIPE_PRICE_LIFETIME` - 终身会员价格 ID
- [ ] `STRIPE_WEBHOOK_SECRET` - Webhook 签名密钥

**前端环境变量（apps/web/.env.local）**：
- [ ] `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY` - Stripe 公钥

---

## 📞 技术支持

### 常见问题

**Q: 为什么论文搜索显示 "Failed to fetch"？**
A: 确保后端 API 已启动，环境变量 `NEXT_PUBLIC_API_BASE` 已正确设置。

**Q: 为什么我的任务/打卡记录刷新后消失了？**
A: 这些功能目前是演示版，数据存储在内存中，页面刷新后会丢失。需要等待后端实现。

**Q: Stripe 支付测试失败怎么办？**
A: 检查 Stripe 环境变量是否正确配置，使用测试卡号 `4242 4242 4242 4242` 进行测试。

**Q: 如何切换到生产环境？**
A: 将 Stripe 测试密钥替换为正式密钥，配置真实的产品价格 ID，设置 Webhook URL。

**Q: 数据能否跨设备同步？**
A: 目前不支持。需要实现用户认证和后端数据库。

### 获取帮助

- 📖 查看 `SETUP_GUIDE.md` - 详细配置指南
- 📖 查看 `README.md` - 项目概述
- 🐛 报告问题：提交 GitHub Issue
- 💬 技术讨论：查看项目 Discussions

---

## 📊 功能对比表

| 功能 | 当前状态 | 数据来源 | 持久化 | 推荐使用 |
|------|---------|---------|--------|---------|
| 论文搜索 | ✅ 完整 | arXiv/Crossref API | 无 | ⭐⭐⭐⭐⭐ |
| Stripe 支付 | ✅ 完整 | Stripe API | Stripe DB | ⭐⭐⭐⭐⭐ |
| 论文助手 | 📋 演示 | 硬编码 | 无 | ⭐ |
| 课题推荐 | 📋 演示 | 硬编码 | 无 | ⭐ |
| 学习路线图 | 📋 演示 | 硬编码 | 无 | ⭐ |
| 任务管理 | 📋 演示 | React State | 无 | ⭐ |
| 打卡系统 | 📋 演示 | React State | 无 | ⭐ |
| 账户管理 | ⚠️ 本地 | localStorage | 浏览器 | ⭐⭐⭐ |
| 数据导出 | ⚠️ 本地 | localStorage | 文件 | ⭐⭐ |
| 使用统计 | ⚠️ 混合 | 硬编码+localStorage | 浏览器 | ⭐⭐ |

---

**最后更新**：2026-01-18

**版本**：v0.1.0 (Demo)

如有任何问题或建议，欢迎提交 Issue 或 Pull Request！
